(function(m,q){function f(a,c){if(1==arguments.length)return _.isArray(a)&&2==a.length?new d(a[0],a[1]):_.isObject(a)&&_.has(a,"x")&&_.has(a,"y")?new d(a.x,a.y):f(a,{});if(2==arguments.length&&!_.isObject(a)&&!_.isObject(c))return new d(a,c);var b;_.isString(a)?(b=document.createElementNS("http://www.w3.org/2000/svg",a),"svg"===a&&b.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink")):_.isObject(a)&&(b=a);_.each(c,function(a,c){"href"==c?b.setAttributeNS("http://www.w3.org/1999/xlink",
"href",a):b.setAttribute(c,a)});for(var e=2;e<arguments.length;++e)_.isArray(arguments[e])?arguments.callee.apply(this,[b,{}].concat(arguments[e])):_.isObject(arguments[e])?b.appendChild(arguments[e]):_.isUndefined(arguments[e])||b.appendChild(document.createTextNode(arguments[e]));return b}function d(a,c){_.has(a,"x")&&_.has(a,"y")?(this.x=a.x,this.y=a.y):_.isArray(a)&&2==a.length?(this.x=a[0],this.y=a[1]):(this.x=a||0,this.y=c||0)}function g(a){return function(c,b){if(1==arguments.length){if(_.isArray(c))return a.call(this,
new d(c[0],c[1]));if(_.isObject(c))return a.call(this,c)}else if(2==arguments.length&&!_.isObject(c)&&!_.isObject(b))return a.call(this,new d(c,b));throw Error(arguments.length+" arguments, possibly wrong type");}}function n(a){return a*Math.PI/180}function h(a){_.has(a,"from")&&new d(a.from);_.has(a,"to")&&new d(a.to);_.each(["a1","a2","aspan","minspan"],function(b){_.has(a,b+"d")&&!_.has(a,b)&&(a[b]=n(a[b+"d"]))});!_.has(a,"aspan")&&_.has(a,"a1")&&_.has(a,"a2")&&(a.aspan=a.a2-a.a1);_.defaults(a,
{minspan:p});var c=a.aspan;if(!_.has(a,"from")||!_.has(a,"to")){var b=new d(a.center);a.from=b.add((new d(a.r)).rotate(a.a1));a.to=b.add((new d(a.r)).rotate(a.a2))}if(Math.abs(c)<=a.minspan)return b=a.to.sub(a.from).mul(1/(3*Math.pow(Math.cos(c/4),2))),[[a.from,a.from.add(b.rotate(-c/2)),a.to.sub(b.rotate(c/2)),a.to]];if(_.has(a,"center"))return b={center:a.center,r:a.r,a1:a.a1,a2:a.a2},h(_.extend({},b,{a2:a.a1+c/2})).concat(h(_.extend({},b,{a1:a.a2-c/2})));console.assert(!1,"Not implemented branch of arcBezier")}
function k(a){a=parseFloat(a);return(Math.round(1E3*a)/1E3).toString()}function l(a){return _.foldl(a,function(a,b){_.isNumber(b)?b=k(b):_.isObject(b)?_.isArray(b)?b=l(b):_.has(b,"x")&&_.has(b,"y")&&(b=k(b.x)+" "+k(b.y)):b=b.toString();return a+(0<a.length&&0<="0123456789".indexOf(a.substr(-1,1))&&0<b.length&&0<="0123456789".indexOf(b.substr(0,1))?" ":"")+b},"")}_.extend(d.prototype,{add:g(function(a){return new d(this.x+a.x,this.y+a.y)}),sub:g(function(a){return new d(this.x-a.x,this.y-a.y)}),dot:g(function(a){return this.x*
a.x+this.y*a.y}),mul:function(a){return new d(this.x*a,this.y*a)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},argument:function(){return Math.atan2(this.y,this.x)},rotate:function(a){var c=Math.cos(a);a=Math.sin(a);return new d(this.x*c-this.y*a,this.x*a+this.y*c)},rename:function(a,c){if(0==arguments.length)return[this.x,this.y];if(1==arguments.length){if(_.isArray(a))return this.rename.apply(this,a);c=a.replace("x","y")}var b={};b[a]=this.x;b[c]=this.y;return b}});d.prototype.scale=
d.prototype.mul;d.prototype.direction=d.prototype.argument;d.prototype.dir=d.prototype.argument;d.prototype.ren=d.prototype.rename;var p=Math.PI/4;_.extend(f,{normalize:g,path:l,string:l,rfd:n,dfr:function(a){return 180*a/Math.PI},arcpath:function(a,c){var b=[],d;if(_.isString(a))d=h(c),b.push(a,d[0][0]);else if(_.isObject(a)&&1==arguments.length)d=h(a);else return;_.each(d,function(a){b.push("C",a.slice(1))});return b},polar:function(a,c){return new d(a*Math.cos(c),a*Math.sin(c))}});m.planeLib=f;
m.$v=f})(this);
